<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OddlÅ¾enieOnline.sk - Å½iadosÅ¥ o osobnÃ½ bankrot</title>
    <meta name="description" content="Online formulÃ¡r pre osobnÃ½ bankrot na Slovensku.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&display=swap" rel="stylesheet">
    <style>
:root{--navy:#0f1b2d;--blue:#2563eb;--blue-light:#3b82f6;--blue-pale:#dbeafe;--blue-bg:#eff6ff;--green:#059669;--green-light:#d1fae5;--red:#dc2626;--red-light:#fee2e2;--orange-light:#fff7ed;--g50:#f8fafc;--g100:#f1f5f9;--g200:#e2e8f0;--g300:#cbd5e1;--g400:#94a3b8;--g500:#64748b;--g600:#475569;--g700:#334155;--g800:#1e293b;--white:#fff;--radius:10px;--radius-lg:16px}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'DM Sans',-apple-system,sans-serif;background:var(--g50);color:var(--g800);line-height:1.6;min-height:100vh}
.header{background:var(--navy);color:var(--white);padding:16px 24px;position:sticky;top:0;z-index:100;box-shadow:0 4px 20px rgba(0,0,0,.3)}
.header-inner{max-width:900px;margin:0 auto;display:flex;align-items:center;justify-content:space-between}
.logo{font-family:'Fraunces',serif;font-size:1.3rem;font-weight:700}.logo span{color:var(--blue-light)}
.header-info{font-size:.8rem;color:var(--g400)}
.progress-container{background:var(--white);border-bottom:1px solid var(--g200);padding:20px 24px;position:sticky;top:56px;z-index:99}
.progress-inner{max-width:900px;margin:0 auto}
.progress-steps{display:flex;gap:4px;margin-bottom:12px}
.progress-step{flex:1;height:4px;border-radius:2px;background:var(--g200);transition:background .4s}
.progress-step.active{background:var(--blue)}.progress-step.completed{background:var(--green)}
.progress-labels{display:flex;justify-content:space-between;font-size:.7rem;color:var(--g400)}
.progress-labels span.active{color:var(--blue);font-weight:600}.progress-labels span.completed{color:var(--green)}
.progress-counter{text-align:center;font-size:.85rem;color:var(--g600);margin-bottom:8px}
.progress-counter strong{color:var(--blue)}
.main{max-width:900px;margin:0 auto;padding:32px 24px 120px}
.step{display:none;animation:fadeIn .3s ease}.step.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.step-header{margin-bottom:28px}
.step-header h2{font-family:'Fraunces',serif;font-size:1.7rem;font-weight:700;color:var(--navy);margin-bottom:6px}
.step-header p{color:var(--g500);font-size:.95rem}
.form-section{background:var(--white);border:1px solid var(--g200);border-radius:var(--radius-lg);padding:28px;margin-bottom:20px;box-shadow:0 1px 2px rgba(0,0,0,.05)}
.form-section-title{font-weight:600;font-size:1rem;color:var(--navy);margin-bottom:20px;padding-bottom:12px;border-bottom:2px solid var(--blue-pale);display:flex;align-items:center;gap:8px}
.form-section-title .icon{width:28px;height:28px;background:var(--blue-pale);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:.9rem}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}
.form-row.three{grid-template-columns:1fr 1fr 1fr}.form-row.full{grid-template-columns:1fr}.form-row.auto{grid-template-columns:2fr 1fr}
label{display:block;font-size:.85rem;font-weight:500;color:var(--g700);margin-bottom:6px}
label .required{color:var(--red);margin-left:2px}
input[type="text"],input[type="email"],input[type="tel"],input[type="number"],input[type="date"],select,textarea{width:100%;padding:10px 14px;border:1.5px solid var(--g300);border-radius:8px;font-size:.95rem;font-family:inherit;color:var(--g800);background:var(--white);transition:border-color .2s,box-shadow .2s}
input:focus,select:focus,textarea:focus{outline:none;border-color:var(--blue);box-shadow:0 0 0 3px rgba(37,99,235,.1)}
input.error,select.error,textarea.error{border-color:var(--red);box-shadow:0 0 0 3px rgba(220,38,38,.1)}
.error-msg{color:var(--red);font-size:.78rem;margin-top:4px;display:none}
input.error+.error-msg,select.error+.error-msg,textarea.error+.error-msg{display:block}
textarea{resize:vertical;min-height:80px}
select{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2364748b' d='M6 8L1 3h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;padding-right:36px}
.checkbox-group{display:flex;align-items:flex-start;gap:10px;padding:12px;background:var(--g50);border-radius:8px;cursor:pointer;margin-bottom:4px}
.checkbox-group input[type="checkbox"]{width:18px;height:18px;margin-top:2px;accent-color:var(--blue);flex-shrink:0}
.checkbox-group span{font-size:.9rem;color:var(--g700)}
.dynamic-list{margin-top:12px}
.dynamic-item{background:var(--g50);border:1px solid var(--g200);border-radius:var(--radius);padding:20px;margin-bottom:12px;position:relative}
.dynamic-item-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.dynamic-item-header h4{font-size:.9rem;font-weight:600;color:var(--navy)}
.btn-remove{background:var(--red-light);color:var(--red);border:none;border-radius:6px;padding:6px 12px;font-size:.78rem;font-weight:600;cursor:pointer}
.btn-remove:hover{background:#fecaca}
.btn-add{display:inline-flex;align-items:center;gap:6px;background:var(--blue-pale);color:var(--blue);border:1.5px dashed var(--blue-light);border-radius:8px;padding:10px 20px;font-size:.88rem;font-weight:600;cursor:pointer;margin-top:8px}
.btn-add:hover{background:var(--blue-bg);border-style:solid}
.info-box{background:var(--blue-bg);border:1px solid var(--blue-pale);border-radius:var(--radius);padding:16px 20px;margin-bottom:20px;display:flex;gap:12px;align-items:flex-start}
.info-box .info-icon{font-size:1.2rem;flex-shrink:0;margin-top:2px}
.info-box p{font-size:.88rem;color:var(--g700)}
.warning-box{background:var(--orange-light);border:1px solid #fed7aa;border-radius:var(--radius);padding:16px 20px;margin-bottom:20px;display:flex;gap:12px}
.nav-buttons{position:fixed;bottom:0;left:0;right:0;background:var(--white);border-top:1px solid var(--g200);padding:16px 24px;z-index:100;box-shadow:0 -4px 20px rgba(0,0,0,.08)}
.nav-inner{max-width:900px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}
.btn{padding:12px 32px;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s;border:none;font-family:inherit}
.btn-back{background:var(--g100);color:var(--g700)}.btn-back:hover{background:var(--g200)}
.btn-next{background:var(--blue);color:var(--white)}.btn-next:hover{background:#1d4ed8}
.btn-submit{background:var(--green);color:var(--white);padding:14px 40px;font-size:1rem}.btn-submit:hover{background:#047857}
.btn-save{background:none;color:var(--g500);font-size:.8rem;padding:8px 16px}
.summary-section{background:var(--white);border:1px solid var(--g200);border-radius:var(--radius-lg);padding:24px;margin-bottom:16px}
.summary-section h3{font-size:.95rem;font-weight:600;color:var(--navy);margin-bottom:16px;display:flex;align-items:center;justify-content:space-between}
.summary-section h3 .edit-btn{font-size:.78rem;color:var(--blue);cursor:pointer;font-weight:500;padding:4px 12px;border-radius:6px;background:var(--blue-pale);border:none}
.summary-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--g100);font-size:.88rem}
.summary-row:last-child{border-bottom:none}
.summary-label{color:var(--g500)}.summary-value{color:var(--g800);font-weight:500;text-align:right;max-width:60%}
.success-screen{text-align:center;padding:60px 24px}
.success-icon{width:80px;height:80px;background:var(--green-light);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 24px;font-size:2.5rem}
.success-screen h2{font-family:'Fraunces',serif;font-size:1.8rem;color:var(--navy);margin-bottom:12px}
.success-screen p{color:var(--g600);max-width:500px;margin:0 auto 32px}
.success-steps{text-align:left;max-width:500px;margin:0 auto}
.success-step{display:flex;gap:16px;align-items:flex-start;margin-bottom:20px}
.success-step-num{width:32px;height:32px;background:var(--blue-pale);color:var(--blue);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.85rem;flex-shrink:0}
.success-step-text h4{font-size:.95rem;color:var(--navy)}.success-step-text p{font-size:.85rem;color:var(--g500);margin:0}
.loading-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(15,27,45,.7);z-index:1000;justify-content:center;align-items:center}
.loading-overlay.active{display:flex}
.loading-box{background:var(--white);border-radius:var(--radius-lg);padding:40px;text-align:center}
.spinner{width:48px;height:48px;border:4px solid var(--g200);border-top-color:var(--blue);border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 16px}
@keyframes spin{to{transform:rotate(360deg)}}
.legal-text{font-size:.82rem;color:var(--g500);line-height:1.6}
.hint{font-size:.78rem;color:var(--g400);margin-top:4px}
.separator{height:1px;background:var(--g200);margin:20px 0}
@media(max-width:640px){.form-row,.form-row.three,.form-row.auto{grid-template-columns:1fr}.form-section{padding:20px 16px}.progress-labels{display:none}.step-header h2{font-size:1.4rem}.btn{padding:12px 20px;font-size:.88rem}}
    </style>
</head>
<body>
<header class="header"><div class="header-inner"><div class="logo">OddlÅ¾enie<span>Online</span>.sk</div><div class="header-info">BezpeÄnÃ½ formulÃ¡r</div></div></header>
<div class="progress-container" id="progressContainer"><div class="progress-inner">
<div class="progress-counter">Krok <strong id="stepNum">1</strong> zo <strong>7</strong></div>
<div class="progress-steps" id="progressSteps"><div class="progress-step active"></div><div class="progress-step"></div><div class="progress-step"></div><div class="progress-step"></div><div class="progress-step"></div><div class="progress-step"></div><div class="progress-step"></div></div>
<div class="progress-labels"><span class="active">OsobnÃ©</span><span>Vzdelanie</span><span>SituÃ¡cia</span><span>Majetok</span><span>Hist. majetku</span><span>Veritelia</span><span>SÃºhrn</span></div>
</div></div>
<main class="main"><form id="bankruptcyForm" novalidate>

<!-- KROK 1: OSOBNÃ‰ ÃšDAJE -->
<div class="step active" data-step="1">
<div class="step-header"><h2>OsobnÃ© Ãºdaje dlÅ¾nÃ­ka</h2><p>ZÃ¡kladnÃ© identifikaÄnÃ© Ãºdaje podÄ¾a Â§ 167 ods. 2 zÃ¡kona Ä. 7/2005 Z. z.</p></div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ‘¤</span> IdentifikÃ¡cia</div>
<div class="form-row three">
<div class="form-group"><label>Titul</label><select id="titul" name="titul"><option value="">â€” bez titulu â€”</option><option value="Bc.">Bc.</option><option value="Mgr.">Mgr.</option><option value="Ing.">Ing.</option><option value="JUDr.">JUDr.</option><option value="MUDr.">MUDr.</option><option value="PhDr.">PhDr.</option><option value="PhD.">PhD.</option></select></div>
<div class="form-group"><label>Meno <span class="required">*</span></label><input type="text" id="meno" name="meno" required placeholder="Miroslav"><div class="error-msg">VyplÅˆte meno</div></div>
<div class="form-group"><label>Priezvisko <span class="required">*</span></label><input type="text" id="priezvisko" name="priezvisko" required placeholder="Å upa"><div class="error-msg">VyplÅˆte priezvisko</div></div>
</div>
<div class="form-row">
<div class="form-group"><label>PredchÃ¡dzajÃºce priezvisko</label><input type="text" id="priezviskoPredch" name="priezviskoPredch" placeholder="Ak bolo inÃ©"></div>
<div class="form-group"><label>RodnÃ© ÄÃ­slo <span class="required">*</span></label><input type="text" id="rodneCislo" name="rodneCislo" required placeholder="771006/6815" maxlength="11"><div class="error-msg">VyplÅˆte rodnÃ© ÄÃ­slo</div></div>
</div>
<div class="form-row">
<div class="form-group"><label>DÃ¡tum narodenia <span class="required">*</span></label><input type="date" id="datumNarodenia" name="datumNarodenia" required><div class="error-msg">VyplÅˆte dÃ¡tum narodenia</div></div>
<div class="form-group"><label>Å tÃ¡tna prÃ­sluÅ¡nosÅ¥</label><input type="text" id="statnaPreslusnost" name="statnaPreslusnost" value="SlovenskÃ¡ republika"></div>
</div>
</div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ </span> TrvalÃ© bydlisko</div>
<div class="form-row auto">
<div class="form-group"><label>Ulica <span class="required">*</span></label><input type="text" id="ulica" name="ulica" required placeholder="SvÃ¤tourbanskÃ¡"><div class="error-msg">VyplÅˆte ulicu</div></div>
<div class="form-group"><label>ÄŒÃ­slo <span class="required">*</span></label><input type="text" id="cisloDomu" name="cisloDomu" required placeholder="26"><div class="error-msg">VyplÅˆte ÄÃ­slo</div></div>
</div>
<div class="form-row three">
<div class="form-group"><label>Obec <span class="required">*</span></label><input type="text" id="obec" name="obec" required placeholder="Nitra"><div class="error-msg">VyplÅˆte obec</div></div>
<div class="form-group"><label>PSÄŒ <span class="required">*</span></label><input type="text" id="psc" name="psc" required placeholder="94901" maxlength="6"><div class="error-msg">VyplÅˆte PSÄŒ</div></div>
<div class="form-group"><label>Kraj</label><select id="kraj" name="kraj"><option value="">â€” vyberte â€”</option><option>BratislavskÃ½</option><option>TrnavskÃ½</option><option>TrenÄiansky</option><option>Nitriansky</option><option>Å½ilinskÃ½</option><option>BanskobystrickÃ½</option><option>PreÅ¡ovskÃ½</option><option>KoÅ¡ickÃ½</option></select></div>
</div>
</div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ“</span> KontaktnÃ© Ãºdaje</div>
<div class="form-row">
<div class="form-group"><label>TelefÃ³n <span class="required">*</span></label><input type="tel" id="telefon" name="telefon" required placeholder="+421905321070"><div class="error-msg">VyplÅˆte telefÃ³n</div></div>
<div class="form-group"><label>E-mail <span class="required">*</span></label><input type="email" id="email" name="email" required placeholder="meno@email.sk"><div class="error-msg">VyplÅˆte e-mail</div></div>
</div>
</div>
</div>

<!-- KROK 2: VZDELANIE + PRÃCA -->
<div class="step" data-step="2">
<div class="step-header"><h2>Vzdelanie a pracovnÃ© skÃºsenosti</h2><p>InformÃ¡cie o vzdelanÃ­, schopnostiach, zdravotnom stave a zamestnaniach.</p></div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ“</span> Vzdelanie</div>
<div class="form-row">
<div class="form-group"><label>NajvyÅ¡Å¡ie dosiahnutÃ© vzdelanie <span class="required">*</span></label><select id="vzdelanie" name="vzdelanie" required><option value="">â€” vyberte â€”</option><option>ZÃ¡kladnÃ©</option><option>StredoÅ¡kolskÃ© bez maturity</option><option>StredoÅ¡kolskÃ© s maturitou</option><option>VyÅ¡Å¡ie odbornÃ©</option><option value="VÅ  I. stupÅˆa">VÅ  I. stupÅˆa (Bc.)</option><option value="VÅ  II. stupÅˆa">VÅ  II. stupÅˆa (Mgr./Ing.)</option><option value="VÅ  III. stupÅˆa">VÅ  III. stupÅˆa (PhD.)</option></select><div class="error-msg">Vyberte vzdelanie</div></div>
<div class="form-group"><label>UkonÄenÃ© v roku</label><input type="text" id="vzdelanieRok" name="vzdelanieRok" placeholder="2001" maxlength="4"></div>
</div>
<div class="form-row">
<div class="form-group"><label>Odbor</label><input type="text" id="vzdelanieOdbor" name="vzdelanieOdbor" placeholder="napr. PrÃ¡vo"></div>
<div class="form-group"><label>Å kola</label><input type="text" id="vzdelanieSkaola" name="vzdelanieSkaola" placeholder="napr. UMB BB"></div>
</div>
<div class="form-row full"><div class="form-group"><label>ÄalÅ¡ie vzdelanie, rekvalifikÃ¡cia</label><textarea id="dalsieVzdelanie" name="dalsieVzdelanie" rows="2" placeholder="Kurzy, rekvalifikÃ¡cie..."></textarea></div></div>
</div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ”§</span> Schopnosti a zruÄnosti</div>
<div class="form-row full"><div class="form-group"><label>JazykovÃ© znalosti</label><input type="text" id="jazyky" name="jazyky" placeholder="napr. AJ A1, NJ B1"></div></div>
<div class="form-row">
<div class="form-group"><label>VodiÄskÃ½ preukaz</label><select id="vodicak" name="vodicak"><option value="Nie">Nie</option><option value="Ãno">Ãno</option></select></div>
<div class="form-group"><label>Typ</label><input type="text" id="vodicakTyp" name="vodicakTyp" placeholder="B"></div>
</div>
</div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ¥</span> ZdravotnÃ½ stav</div>
<div class="info-box"><span class="info-icon">â„¹ï¸</span><p>UveÄte len zÃ¡vaÅ¾nÃ© zdravotnÃ© problÃ©my (invalidnÃ½ dÃ´chodok, Å¤ZP).</p></div>
<div class="form-row full"><div class="form-group"><textarea id="zdravotnyStav" name="zdravotnyStav" rows="2" placeholder="OpÃ­Å¡te zdravotnÃ½ stav..."></textarea></div></div>
</div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ’¼</span> PracovnÃ© skÃºsenosti</div>
<div class="info-box"><span class="info-icon">â„¹ï¸</span><p>UveÄte priebeh zamestnanÃ­ vrÃ¡tane dohÃ´d, brigÃ¡d, SZÄŒO, podnikania aj nezamestnanosti.</p></div>
<div id="pracovneList" class="dynamic-list">
<div class="dynamic-item" data-index="0">
<div class="dynamic-item-header"><h4>Zamestnanie Ä. 1</h4></div>
<div class="form-row three">
<div class="form-group"><label>Od</label><input type="text" name="praca_od_0" placeholder="01/2001"></div>
<div class="form-group"><label>Do</label><input type="text" name="praca_do_0" placeholder="12/2001 alebo doteraz"></div>
<div class="form-group"><label>PozÃ­cia</label><input type="text" name="praca_pozicia_0" placeholder="SZÄŒO, exekÃºtor..."></div>
</div>
<div class="form-row full"><div class="form-group"><label>ZamestnÃ¡vateÄ¾</label><input type="text" name="praca_zamestnavatel_0" placeholder="NÃ¡zov firmy alebo SZÄŒO"></div></div>
</div>
</div>
<button type="button" class="btn-add" onclick="addDynamic('pracovneList','praca','Zamestnanie')">+ PridaÅ¥ zamestnanie</button>
</div>
</div>

<!-- KROK 3: Å½IVOTNÃ SITUÃCIA -->
<div class="step" data-step="3">
<div class="step-header"><h2>AktuÃ¡lna Å¾ivotnÃ¡ situÃ¡cia</h2><p>SociÃ¡lne postavenie, prÃ­jmy, vÃ½davky, vznik dlhov a spriaznenÃ© osoby.</p></div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ“‹</span> SociÃ¡lne postavenie</div>
<div class="info-box"><span class="info-icon">â„¹ï¸</span><p>V sÃºÄasnosti som: (oznaÄte â€” mÃ´Å¾ete oznaÄiÅ¥ aj viac moÅ¾nostÃ­)</p></div>
<label class="checkbox-group"><input type="checkbox" name="soc_zamestanany" value="1"><span>zamestnanÃ½/Ã¡</span></label>
<label class="checkbox-group"><input type="checkbox" name="soc_szco" value="1" onchange="document.getElementById('soc_szco_ico').style.display=this.checked?'block':'none'"><span>samostatne zÃ¡robkovo ÄinnÃ¡ osoba</span></label>
<div id="soc_szco_ico" style="display:none;margin:0 0 8px 40px"><div class="form-group"><label>uveÄte IÄŒO:</label><input type="text" id="ico" name="ico" placeholder="37857207"></div></div>
<label class="checkbox-group"><input type="checkbox" name="soc_dochodok" value="1" onchange="document.getElementById('soc_dochodok_druh').style.display=this.checked?'block':'none'"><span>poberateÄ¾/-ka dÃ´chodku</span></label>
<div id="soc_dochodok_druh" style="display:none;margin:0 0 8px 40px"><div class="form-group"><label>uveÄte druh:</label><input type="text" id="dochodokDruh" name="dochodokDruh" placeholder="starobnÃ½, invalidnÃ½, vdovskÃ½..."></div></div>
<label class="checkbox-group"><input type="checkbox" name="soc_nezamestnany" value="1"><span>dobrovoÄ¾ne nezamestnanÃ½/Ã¡</span></label>
<label class="checkbox-group"><input type="checkbox" name="soc_uchadzac" value="1"><span>uchÃ¡dzaÄ/-ka o zamestnanie</span></label>
<label class="checkbox-group"><input type="checkbox" name="soc_davky" value="1" onchange="document.getElementById('soc_davky_druh').style.display=this.checked?'block':'none'"><span>poberateÄ¾/-ka sociÃ¡lnych dÃ¡vok</span></label>
<div id="soc_davky_druh" style="display:none;margin:0 0 8px 40px"><div class="form-group"><label>uveÄte druh:</label><input type="text" id="davkyDruh" name="davkyDruh" placeholder="dÃ¡vka v hmotnej nÃºdzi, prÃ­davok na dieÅ¥a..."></div></div>
<label class="checkbox-group"><input type="checkbox" name="soc_ine" value="1" onchange="document.getElementById('soc_ine_text').style.display=this.checked?'block':'none'"><span>inÃ©</span></label>
<div id="soc_ine_text" style="display:none;margin:0 0 8px 40px"><div class="form-group"><label>uveÄte:</label><input type="text" id="inePostavenie" name="inePostavenie" placeholder="..."></div></div>
<div class="form-row" style="margin-top:16px">
<div class="form-group"><label>RodinnÃ½ stav</label><select id="rodinnyStav" name="rodinnyStav"><option value="">â€” vyberte â€”</option><option>SlobodnÃ½/Ã¡</option><option>Å½enatÃ½/VydatÃ¡</option><option>RozvedenÃ½/Ã¡</option><option>Vdovec/Vdova</option></select></div>
</div>
<div class="form-row full"><div class="form-group"><label>BSM</label><select id="bsm" name="bsm"><option value="Nie">Nie</option><option value="Ãno">Ãno</option><option value="ZÃºÅ¾enÃ©">ZÃºÅ¾enÃ© BSM</option><option value="ZruÅ¡enÃ©">ZruÅ¡enÃ© BSM</option></select></div></div>
</div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ’°</span> Moje prÃ­jmy</div>
<div id="prijmyList" class="dynamic-list">
<div class="dynamic-item" data-index="0">
<div class="form-row"><div class="form-group"><label>Suma (â‚¬/mesiac)</label><input type="number" name="prijem_suma_0" placeholder="3000"></div><div class="form-group"><label>Zdroj</label><input type="text" name="prijem_zdroj_0" placeholder="mzda, dÃ´chodok..."></div></div>
</div></div>
<button type="button" class="btn-add" onclick="addDynamic('prijmyList','prijem','PrÃ­jem')">+ PridaÅ¥ prÃ­jem</button>
</div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ§¾</span> Moje vÃ½davky (â‚¬/mesiac)</div>
<div class="form-row"><div class="form-group"><label>BÃ½vanie (nÃ¡jom, energie)</label><input type="number" id="vydaj_byvanie" name="vydaj_byvanie" placeholder="100"></div><div class="form-group"><label>Strava</label><input type="number" id="vydaj_strava" name="vydaj_strava" placeholder="100"></div></div>
<div class="form-row"><div class="form-group"><label>Hygiena a oÅ¡atenie</label><input type="number" id="vydaj_hygiena" name="vydaj_hygiena" placeholder="10"></div><div class="form-group"><label>ZdravotnÃ¡ starostlivosÅ¥</label><input type="number" id="vydaj_zdravie" name="vydaj_zdravie" placeholder="10"></div></div>
<div class="form-row"><div class="form-group"><label>StarostlivosÅ¥ o deti</label><input type="number" id="vydaj_deti" name="vydaj_deti" placeholder="100"></div><div class="form-group"><label>PoistnÃ©</label><input type="number" id="vydaj_poistne" name="vydaj_poistne" placeholder="10"></div></div>
<div class="form-row"><div class="form-group"><label>CestovnÃ©</label><input type="number" id="vydaj_cestovne" name="vydaj_cestovne" placeholder="10"></div><div class="form-group"><label>SplÃ¡canie dlhov</label><input type="number" id="vydaj_dlhy" name="vydaj_dlhy" placeholder="500"></div></div>
</div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ“</span> Ako vznikli moje dlhy</div>
<div class="form-row full"><div class="form-group"><label>OpÃ­Å¡te vznik dlhov <span class="required">*</span></label><textarea id="vznikDlhov" name="vznikDlhov" rows="4" required placeholder="Dlhy vznikli v dÃ´sledku neÃºspeÅ¡nÃ©ho podnikania..."></textarea><div class="error-msg">OpÃ­Å¡te vznik dlhov</div></div></div>
</div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span> SpoloÄnÃ¡ domÃ¡cnosÅ¥</div>
<div class="info-box"><span class="info-icon">â„¹ï¸</span><p>UveÄte vÅ¡etky osoby, s ktorÃ½mi Å¾ijete v spoloÄnej domÃ¡cnosti (manÅ¾el/ka, deti, inÃ©). Ku kaÅ¾dej osobe uveÄte sociÃ¡lne postavenie.</p></div>
<div id="domacnostList" class="dynamic-list"></div>
<button type="button" class="btn-add" onclick="addOsobaDomacnost()">+ PridaÅ¥ osobu v domÃ¡cnosti</button>
</div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ‘¥</span> BlÃ­zke osoby mimo domÃ¡cnosti</div>
<div class="info-box"><span class="info-icon">â„¹ï¸</span><p>PrÃ­buznÃ­ v priamom rade, sÃºrodenci, manÅ¾el a inÃ© blÃ­zke osoby.</p></div>
<div id="blizkeOsobyList" class="dynamic-list">
<div class="dynamic-item" data-index="0">
<div class="form-row three">
<div class="form-group"><label>Meno a priezvisko</label><input type="text" name="blizka_meno_0" placeholder="KatarÃ­na Å upovÃ¡"></div>
<div class="form-group"><label>VzÅ¥ah</label><input type="text" name="blizka_vztah_0" placeholder="sestra"></div>
<div class="form-group"><label>Adresa</label><input type="text" name="blizka_adresa_0" placeholder="KmeÅ¥kova 30, Nitra"></div>
</div></div>
</div>
<button type="button" class="btn-add" onclick="addDynamic('blizkeOsobyList','blizka','BlÃ­zka osoba')">+ PridaÅ¥ osobu</button>
</div>

<div class="form-section">
<div class="form-section-title"><span class="icon">ğŸ¢</span> KvalifikovanÃ© ÃºÄasti v prÃ¡vnickÃ½ch osobÃ¡ch</div>
<div class="info-box"><span class="info-icon">â„¹ï¸</span><p>PrÃ¡vnickÃ© osoby, v ktorÃ½ch mÃ¡te vy alebo blÃ­zke osoby podiel aspoÅˆ 5 %.</p></div>
<div class="form-row full"><div class="form-group"><label>a) Moje ÃºÄasti</label><textarea id="mojeUcasti" name="mojeUcasti" rows="2" placeholder="NovÃ¡ nitrianska spoloÄnosÅ¥, s.r.o., IÄŒO: 36542997, Nitra"></textarea></div></div>
<div class="form-row full"><div class="form-group"><label>b) ÃšÄasti blÃ­zkych osÃ´b</label><textarea id="blizkeUcasti" name="blizkeUcasti" rows="2" placeholder="Petra Å upovÃ¡ â€“ ABC Trading s.r.o., IÄŒO: 12345678, Bratislava"></textarea></div></div>
</div>
</div>

<!-- KROK 4: ZOZNAM MAJETKU -->
<div class="step" data-step="4">
<div class="step-header"><h2>Zoznam majetku dlÅ¾nÃ­ka</h2><p>UveÄte vÅ¡etok majetok, ktorÃ½ v sÃºÄasnosti vlastnÃ­te.</p></div>

<div class="form-section"><div class="form-section-title"><span class="icon">ğŸŒ</span> Pozemky</div>
<div id="pozemkyList" class="dynamic-list"></div>
<button type="button" class="btn-add" onclick="addPozemok('pozemkyList')">+ PridaÅ¥ pozemok</button></div>

<div class="form-section"><div class="form-section-title"><span class="icon">ğŸ—ï¸</span> Stavby</div>
<div class="info-box"><span class="info-icon">â„¹ï¸</span><p>V prÃ­pade dokonÄenÃ½ch a skolaudovanÃ½ch stavieb nezapÃ­sanÃ½ch na LV uveÄte kolaudaÄnÃ© rozhodnutie. Pri nedokonÄenÃ½ch uveÄte parcelu a stavebnÃ© povolenie.</p></div>
<div id="stavbyList" class="dynamic-list"></div>
<button type="button" class="btn-add" onclick="addStavba('stavbyList')">+ PridaÅ¥ stavbu</button></div>

<div class="form-section"><div class="form-section-title"><span class="icon">ğŸ </span> Byty a nebytovÃ© priestory</div>
<div id="bytyList" class="dynamic-list"></div>
<button type="button" class="btn-add" onclick="addByt('bytyList')">+ PridaÅ¥ byt</button></div>

<div class="form-section"><div class="form-section-title"><span class="icon">ğŸš—</span> HnuteÄ¾nÃ© veci</div>
<div id="hnutelneList" class="dynamic-list"></div>
<button type="button" class="btn-add" onclick="addHnutelna('hnutelneList')">+ PridaÅ¥ hnuteÄ¾nÃº vec</button></div>

<div class="form-section"><div class="form-section-title"><span class="icon">ğŸ¦</span> PohÄ¾adÃ¡vky z ÃºÄtu v banke</div>
<div id="uctyList" class="dynamic-list"></div>
<button type="button" class="btn-add" onclick="addUcet()">+ PridaÅ¥ bankovÃ½ ÃºÄet</button></div>

<div class="form-section"><div class="form-section-title"><span class="icon">ğŸ’</span> InÃ© majetkovÃ© hodnoty</div>
<div class="form-row full"><div class="form-group"><textarea id="ineMajetkoveHodnoty" name="ineMajetkoveHodnoty" rows="2" placeholder="napr. zlato 1 unca, striebro 100 uncÃ­"></textarea></div></div></div>

<div class="form-section"><div class="form-section-title"><span class="icon">âš–ï¸</span> ZabezpeÄovacie prÃ¡va a sÃºdne spory</div>
<div class="form-row full"><div class="form-group"><label>ZabezpeÄovacie prÃ¡va k majetku</label><textarea id="zabezpPrava" name="zabezpPrava" rows="2" placeholder="(Å¾iadne)"></textarea></div></div>
<div class="form-row full"><div class="form-group"><label>SÃºdne spory sÃºvisiace s majetkom</label><textarea id="sudneSpory" name="sudneSpory" rows="2" placeholder="nemÃ¡m"></textarea></div></div></div>

<div class="form-section"><div class="form-section-title"><span class="icon">ğŸ¡</span> Obydlie â€“ nepostihnuteÄ¾nÃ¡ hodnota obydlia dlÅ¾nÃ­ka</div>
<div class="info-box"><span class="info-icon">â„¹ï¸</span><p>PodÄ¾a Â§ 166d zÃ¡kona Ä. 7/2005 Z.z. si dlÅ¾nÃ­k mÃ´Å¾e uplatniÅ¥ nepostihnuteÄ¾nÃº hodnotu obydlia (10 000 â‚¬) na jednu obÃ½vateÄ¾nÃº vec, ktorÃº oznaÄÃ­ ako svoje obydlie. Ak je obydlie v BSM, kaÅ¾dÃ½ z manÅ¾elov mÃ¡ nÃ¡rok na 10 000 â‚¬ (spolu 20 000 â‚¬). Podmienkou je vlastnÃ­ctvo obÃ½vateÄ¾nej veci â€” ak nebÃ½vate vo vlastnom, nepostihnuteÄ¾nÃº hodnotu obydlia si uplatniÅ¥ nemÃ´Å¾ete.</p></div>
<div style="margin-bottom:12px">
<label class="checkbox-group"><input type="radio" name="obydlieTyp" value="nevlastnim" checked onchange="document.getElementById('obydlieDetailUplatnujem').style.display='none'" style="width:18px;height:18px;accent-color:var(--blue)"><span>Vyhlasujem, Å¾e <strong>nevlastnÃ­m</strong> obÃ½vateÄ¾nÃº vec, ktorÃ¡ by mohla byÅ¥ v zozname majetku oznaÄenÃ¡ za obydlie.</span></label>
<label class="checkbox-group"><input type="radio" name="obydlieTyp" value="uplatnujem" onchange="document.getElementById('obydlieDetailUplatnujem').style.display='block';buildObydlieSelect()" style="width:18px;height:18px;accent-color:var(--blue)"><span><strong>UplatÅˆujem si</strong> nepostihnuteÄ¾nÃº hodnotu obydlia na obÃ½vateÄ¾nÃº vec (obydlie) uvedenÃº v zozname majetku.</span></label>
</div>
<div id="obydlieDetailUplatnujem" style="display:none">
<div class="form-row full"><div class="form-group"><label>ObÃ½vateÄ¾nÃ¡ vec zo zoznamu majetku <span class="required">*</span></label><select id="obydlieVyber" name="obydlieVyber" style="font-size:.88rem"><option value="">â€” najprv vyplÅˆte majetok v krokoch vyÅ¡Å¡ie â€”</option></select><div class="hint">Zoznam sa automaticky naplnÃ­ z majetku, ktorÃ½ ste uviedli (stavby, byty, hnuteÄ¾nÃ© veci)</div></div></div>
<div class="form-row full"><div class="form-group"><label>OznaÄenÃ© obydlie je v bezpodielovom spoluvlastnÃ­ctve manÅ¾elov?</label><select id="obydlieBSM" name="obydlieBSM"><option value="Nie">Nie â€” nepostihnuteÄ¾nÃ¡ hodnota obydlia je 10 000 â‚¬</option><option value="Ãno">Ãno â€” nepostihnuteÄ¾nÃ¡ hodnota obydlia je 20 000 â‚¬ (10 000 â‚¬ pre kaÅ¾dÃ©ho manÅ¾ela)</option></select></div></div>
</div></div>
</div>

<!-- KROK 5: HISTÃ“RIA MAJETKU -->
<div class="step" data-step="5">
<div class="step-header"><h2>Majetok vÃ¤ÄÅ¡ej hodnoty za poslednÃ© 3 roky</h2><p>Majetok, ktorÃ½ ste vlastnili v poslednÃ½ch troch rokoch a uÅ¾ nevlastnÃ­te.</p></div>
<div class="warning-box"><span class="info-icon">âš ï¸</span><p>UvÃ¡dzajte len majetok <strong>vÃ¤ÄÅ¡ej hodnoty</strong> (nad 2 000 â‚¬) podÄ¾a Â§ 48a vyhl. 665/2005 Z.z. Ak ste v poslednÃ½ch 3 rokoch nepreviedli Å¾iaden takÃ½to majetok, mÃ´Å¾ete tento krok preskoÄiÅ¥.</p></div>

<div class="form-section"><div class="form-section-title"><span class="icon">ğŸŒ</span> Pozemky (hist.)</div>
<div id="histPozemkyList" class="dynamic-list"></div>
<button type="button" class="btn-add" onclick="addPozemok('histPozemkyList')">+ PridaÅ¥ pozemok</button></div>

<div class="form-section"><div class="form-section-title"><span class="icon">ğŸ—ï¸</span> Stavby (hist.)</div>
<div id="histStavbyList" class="dynamic-list"></div>
<button type="button" class="btn-add" onclick="addStavba('histStavbyList')">+ PridaÅ¥ stavbu</button></div>

<div class="form-section"><div class="form-section-title"><span class="icon">ğŸ </span> Byty (hist.)</div>
<div id="histBytyList" class="dynamic-list"></div>
<button type="button" class="btn-add" onclick="addByt('histBytyList')">+ PridaÅ¥ byt</button></div>

<div class="form-section"><div class="form-section-title"><span class="icon">ğŸš—</span> HnuteÄ¾nÃ© veci (hist.)</div>
<div id="histHnutelneList" class="dynamic-list"></div>
<button type="button" class="btn-add" onclick="addHnutelna('histHnutelneList')">+ PridaÅ¥ hnuteÄ¾nÃº vec</button></div>

<div class="form-section"><div class="form-section-title"><span class="icon">ğŸ’</span> InÃ© (hist.)</div>
<div class="form-row full"><div class="form-group"><textarea id="histIne" name="histIne" rows="2" placeholder="(Å¾iadne)"></textarea></div></div></div>

<div class="form-section"><div class="form-section-title"><span class="icon">âš–ï¸</span> ZabezpeÄovacie prÃ¡va a spory (hist.)</div>
<div class="form-row full"><div class="form-group"><label>ZabezpeÄovacie prÃ¡va</label><textarea id="histZabezp" name="histZabezp" rows="2" placeholder="(Å¾iadne)"></textarea></div></div>
<div class="form-row full"><div class="form-group"><label>SÃºdne spory</label><textarea id="histSpory" name="histSpory" rows="2" placeholder="(Å¾iadne)"></textarea></div></div></div>
</div>

<!-- KROK 6: VERITELIA -->
<div class="step" data-step="6">
<div class="step-header"><h2>Zoznam veriteÄ¾ov dlÅ¾nÃ­ka</h2><p>UveÄte vÅ¡etkÃ½ch veriteÄ¾ov, voÄi ktorÃ½m mÃ¡te zÃ¡vÃ¤zky.</p></div>
<div class="form-section"><div class="form-section-title"><span class="icon">ğŸ›ï¸</span> Veritelia</div>
<div id="veriteliaList" class="dynamic-list"></div>
<button type="button" class="btn-add" onclick="addVeritel()">+ PridaÅ¥ veriteÄ¾a</button></div>
</div>

<!-- KROK 7: SÃšHRN -->
<div class="step" data-step="7">
<div class="step-header"><h2>SÃºhrn a odoslanie Å¾iadosti</h2><p>Skontrolujte sprÃ¡vnosÅ¥ Ãºdajov a odoÅ¡lite Å¾iadosÅ¥.</p></div>
<div id="summaryContent"></div>
<div class="form-section">
<div class="form-section-title"><span class="icon">âœ…</span> ÄŒestnÃ© prehlÃ¡senie</div>
<div class="legal-text" style="margin-bottom:16px">
<p>ÄŒestne vyhlasujem, Å¾e som platobne neschopnÃ½/Ã¡, do tohto stavu som sa nepriviedol/a Ãºmyselne, pri preberanÃ­ zÃ¡vÃ¤zkov som sa nespoliehal/a na to, Å¾e svoje dlhy budem rieÅ¡iÅ¥ oddlÅ¾enÃ­m a nemÃ¡m v Ãºmysle poÅ¡kodiÅ¥ alebo zvÃ½hodniÅ¥ Å¾iadneho veriteÄ¾a.</p><br>
<p>ÄŒestne vyhlasujem, Å¾e na ÃºzemÃ­ Slovenskej republiky mÃ¡m centrum hlavnÃ½ch zÃ¡ujmov.</p><br>
<p>ÄŒestne vyhlasujem, Å¾e vÅ¡etky Ãºdaje uvedenÃ© v Å¾iadosti sÃº pravdivÃ© a ÃºplnÃ© a som si vedomÃ½/Ã¡ prÃ¡vnych nÃ¡sledkov v prÃ­pade ÃºmyselnÃ©ho uvedenia nepravdivÃ½ch alebo neÃºplnÃ½ch Ãºdajov.</p>
</div>
<label class="checkbox-group"><input type="checkbox" id="cestnePrehlasenie" name="cestnePrehlasenie" required><span><strong>Potvrdzujem ÄestnÃ© prehlÃ¡senie</strong> â€” Som si vedomÃ½/Ã¡ prÃ¡vnych nÃ¡sledkov.</span></label>
<div class="separator"></div>
<label class="checkbox-group"><input type="checkbox" id="gdprSuhlas" name="gdprSuhlas" required><span>SÃºhlasÃ­m so spracovanÃ­m osobnÃ½ch Ãºdajov v sÃºlade s GDPR.</span></label>
</div>
</div>

</form></main>

<!-- NAVIGATION -->
<div class="nav-buttons" id="navButtons"><div class="nav-inner">
<button type="button" class="btn btn-back" id="btnBack" onclick="prevStep()" style="visibility:hidden">â† SpÃ¤Å¥</button>
<button type="button" class="btn btn-save" onclick="saveProgress()">UloÅ¾iÅ¥ rozpracovanÃ©</button>
<button type="button" class="btn btn-save" onclick="autoFill()" style="color:var(--blue)">âš¡ Demo vyplnenie</button>
<button type="button" class="btn btn-next" id="btnNext" onclick="nextStep()">Äalej â†’</button>
</div></div>

<!-- LOADING -->
<div class="loading-overlay" id="loadingOverlay"><div class="loading-box"><div class="spinner"></div><p>Odosielam Å¾iadosÅ¥...</p><p style="font-size:.82rem;color:var(--g500);margin-top:8px">Generujem dokumenty a odosielam email.</p></div></div>

<script>
let currentStep = 1;
const totalSteps = 7;
let counters = {praca:1,prijem:1,blizka:1,domacnost:0,pozemky:0,stavby:0,byty:0,hnutelne:0,ucty:0,veritelia:0};
const API_URL = window.location.hostname === 'localhost' ? 'http://localhost:3000' : 'https://oddlzenieonline-backend-production.up.railway.app';

// === NAVIGATION ===
function updateUI() {
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    document.querySelector('.step[data-step="'+currentStep+'"]').classList.add('active');
    document.getElementById('stepNum').textContent = currentStep;
    document.querySelectorAll('.progress-step').forEach((s,i) => {
        s.classList.remove('active','completed');
        if(i+1===currentStep) s.classList.add('active');
        if(i+1<currentStep) s.classList.add('completed');
    });
    document.querySelectorAll('.progress-labels span').forEach((l,i) => {
        l.classList.remove('active','completed');
        if(i+1===currentStep) l.classList.add('active');
        if(i+1<currentStep) l.classList.add('completed');
    });
    document.getElementById('btnBack').style.visibility = currentStep===1?'hidden':'visible';
    const btn = document.getElementById('btnNext');
    if(currentStep===totalSteps){btn.textContent='OdoslaÅ¥ Å¾iadosÅ¥ âœ‰ï¸';btn.className='btn btn-submit';btn.onclick=submitForm;}
    else{btn.textContent='Äalej â†’';btn.className='btn btn-next';btn.onclick=nextStep;}
    window.scrollTo({top:0,behavior:'smooth'});
}
function nextStep(){if(!validateStep(currentStep))return;if(currentStep<totalSteps){currentStep++;if(currentStep===totalSteps)buildSummary();updateUI();saveProgress();}}
function prevStep(){if(currentStep>1){currentStep--;updateUI();}}
function goToStep(s){currentStep=s;updateUI();}

// === VALIDATION ===
function validateStep(step){
    const el=document.querySelector('.step[data-step="'+step+'"]');
    const req=el.querySelectorAll('[required]');let valid=true;
    req.forEach(inp=>{inp.classList.remove('error');if(!inp.value.trim()){inp.classList.add('error');valid=false;}
    if(inp.type==='email'&&inp.value&&!inp.value.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){inp.classList.add('error');valid=false;}});
    if(step===7){const cp=document.getElementById('cestnePrehlasenie'),gd=document.getElementById('gdprSuhlas');
    if(!cp.checked||!gd.checked){valid=false;if(!cp.checked)alert('MusÃ­te potvrdiÅ¥ ÄestnÃ© prehlÃ¡senie.');else alert('MusÃ­te sÃºhlasiÅ¥ so spracovanÃ­m osobnÃ½ch Ãºdajov.');}}
    if(!valid&&step!==7){const fe=el.querySelector('.error');if(fe)fe.scrollIntoView({behavior:'smooth',block:'center'});}
    return valid;
}

// === DYNAMIC - GENERIC ===
function addDynamic(listId, prefix, label) {
    const list = document.getElementById(listId);
    const idx = counters[prefix]++;
    let fields = '';
    if(prefix==='praca'){
        fields=`<div class="form-row three"><div class="form-group"><label>Od</label><input type="text" name="praca_od_${idx}" placeholder="01/2001"></div><div class="form-group"><label>Do</label><input type="text" name="praca_do_${idx}" placeholder="doteraz"></div><div class="form-group"><label>PozÃ­cia</label><input type="text" name="praca_pozicia_${idx}"></div></div><div class="form-row full"><div class="form-group"><label>ZamestnÃ¡vateÄ¾</label><input type="text" name="praca_zamestnavatel_${idx}"></div></div>`;
    } else if(prefix==='prijem'){
        fields=`<div class="form-row"><div class="form-group"><label>Suma (â‚¬)</label><input type="number" name="prijem_suma_${idx}"></div><div class="form-group"><label>Zdroj</label><input type="text" name="prijem_zdroj_${idx}"></div></div>`;
    } else if(prefix==='blizka'){
        fields=`<div class="form-row three"><div class="form-group"><label>Meno a priezvisko</label><input type="text" name="blizka_meno_${idx}"></div><div class="form-group"><label>VzÅ¥ah</label><input type="text" name="blizka_vztah_${idx}"></div><div class="form-group"><label>Adresa</label><input type="text" name="blizka_adresa_${idx}"></div></div>`;
    }
    list.insertAdjacentHTML('beforeend',`<div class="dynamic-item"><div class="dynamic-item-header"><h4>${label} Ä. ${idx+1}</h4><button type="button" class="btn-remove" onclick="this.closest('.dynamic-item').remove()">OdstrÃ¡niÅ¥</button></div>${fields}</div>`);
}

// === OBYDLIE SELECT ===
function buildObydlieSelect(){
    const sel=document.getElementById('obydlieVyber');
    const prev=sel.value;
    sel.innerHTML='<option value="">â€” vyberte obÃ½vateÄ¾nÃº vec â€”</option>';
    // Stavby
    document.querySelectorAll('#stavbyList .dynamic-item').forEach((item,i)=>{
        const popis=item.querySelector('[name^="s_popis_"]');
        const obec=item.querySelector('[name^="s_obec_"]');
        const lv=item.querySelector('[name^="s_lv_"]');
        const label=`Stavba Ä. ${i+1}: ${popis?popis.value:''}, ${obec?obec.value:''} (LV ${lv?lv.value:''})`;
        sel.insertAdjacentHTML('beforeend',`<option value="Stavba|${i+1}|${label}">${label}</option>`);
    });
    // Byty
    document.querySelectorAll('#bytyList .dynamic-item').forEach((item,i)=>{
        const popisBytu=item.querySelector('[name^="b_popisBytu_"]');
        const obec=item.querySelector('[name^="b_obec_"]');
        const lv=item.querySelector('[name^="b_lv_"]');
        const cislo=item.querySelector('[name^="b_cislo_"]');
        const label=`Byt Ä. ${i+1}: ${popisBytu?popisBytu.value:''}, byt Ä. ${cislo?cislo.value:''}, ${obec?obec.value:''} (LV ${lv?lv.value:''})`;
        sel.insertAdjacentHTML('beforeend',`<option value="Byt|${i+1}|${label}">${label}</option>`);
    });
    // HnuteÄ¾nÃ© veci (karavan, maringotka...)
    document.querySelectorAll('#hnutelneList .dynamic-item').forEach((item,i)=>{
        const popis=item.querySelector('[name^="h_popis_"]');
        const label=`HnuteÄ¾nÃ¡ vec Ä. ${i+1}: ${popis?popis.value:''}`;
        sel.insertAdjacentHTML('beforeend',`<option value="HnuteÄ¾nÃ¡ vec|${i+1}|${label}">${label}</option>`);
    });
    if(prev){sel.value=prev;}
}

// === OSOBA V DOMÃCNOSTI ===
function addOsobaDomacnost(){
    const list=document.getElementById('domacnostList');const idx=counters.domacnost++;
    list.insertAdjacentHTML('beforeend',`<div class="dynamic-item" data-index="${idx}">
    <div class="dynamic-item-header"><h4>Osoba Ä. ${idx+1}</h4><button type="button" class="btn-remove" onclick="this.closest('.dynamic-item').remove()">OdstrÃ¡niÅ¥</button></div>
    <div class="form-row three">
        <div class="form-group"><label>Meno a priezvisko</label><input type="text" name="dom_meno_${idx}" placeholder="Petra Å upovÃ¡"></div>
        <div class="form-group"><label>DÃ¡tum narodenia</label><input type="text" name="dom_datnar_${idx}" placeholder="26.06.1978"></div>
        <div class="form-group"><label>VzÅ¥ah</label><select name="dom_vztah_${idx}"><option value="">â€” vyberte â€”</option><option>manÅ¾el/ka</option><option>druh/druÅ¾ka</option><option>syn</option><option>dcÃ©ra</option><option>rodiÄ</option><option>inÃ©</option></select></div>
    </div>
    <div style="margin-top:8px;padding:12px;background:var(--blue-bg);border-radius:8px">
        <label style="font-size:.82rem;font-weight:600;color:var(--navy);margin-bottom:8px;display:block">SociÃ¡lne postavenie:</label>
        <label class="checkbox-group" style="margin-bottom:2px"><input type="checkbox" name="dom_soc_zamestanany_${idx}" value="1"><span>zamestnanÃ½/Ã¡</span></label>
        <label class="checkbox-group" style="margin-bottom:2px"><input type="checkbox" name="dom_soc_szco_${idx}" value="1" onchange="this.closest('.dynamic-item').querySelector('.dom-ico-${idx}').style.display=this.checked?'block':'none'"><span>samostatne zÃ¡robkovo ÄinnÃ¡ osoba</span></label>
        <div class="dom-ico-${idx}" style="display:none;margin:0 0 4px 40px"><label style="font-size:.8rem">IÄŒO:</label><input type="text" name="dom_ico_${idx}" placeholder="12345678" style="max-width:200px"></div>
        <label class="checkbox-group" style="margin-bottom:2px"><input type="checkbox" name="dom_soc_dochodok_${idx}" value="1" onchange="this.closest('.dynamic-item').querySelector('.dom-doch-${idx}').style.display=this.checked?'block':'none'"><span>poberateÄ¾/-ka dÃ´chodku</span></label>
        <div class="dom-doch-${idx}" style="display:none;margin:0 0 4px 40px"><label style="font-size:.8rem">druh:</label><input type="text" name="dom_dochodokDruh_${idx}" placeholder="starobnÃ½, invalidnÃ½..." style="max-width:250px"></div>
        <label class="checkbox-group" style="margin-bottom:2px"><input type="checkbox" name="dom_soc_nezamestnany_${idx}" value="1"><span>dobrovoÄ¾ne nezamestnanÃ½/Ã¡</span></label>
        <label class="checkbox-group" style="margin-bottom:2px"><input type="checkbox" name="dom_soc_uchadzac_${idx}" value="1"><span>uchÃ¡dzaÄ/-ka o zamestnanie</span></label>
        <label class="checkbox-group" style="margin-bottom:2px"><input type="checkbox" name="dom_soc_davky_${idx}" value="1" onchange="this.closest('.dynamic-item').querySelector('.dom-davky-${idx}').style.display=this.checked?'block':'none'"><span>poberateÄ¾/-ka sociÃ¡lnych dÃ¡vok</span></label>
        <div class="dom-davky-${idx}" style="display:none;margin:0 0 4px 40px"><label style="font-size:.8rem">druh:</label><input type="text" name="dom_davkyDruh_${idx}" placeholder="dÃ¡vka v hmotnej nÃºdzi..." style="max-width:250px"></div>
        <label class="checkbox-group" style="margin-bottom:2px"><input type="checkbox" name="dom_soc_ine_${idx}" value="1" onchange="this.closest('.dynamic-item').querySelector('.dom-ine-${idx}').style.display=this.checked?'block':'none'"><span>inÃ©</span></label>
        <div class="dom-ine-${idx}" style="display:none;margin:0 0 4px 40px"><label style="font-size:.8rem">uveÄte:</label><input type="text" name="dom_ine_${idx}" placeholder="Å¡tudent, na materskej..." style="max-width:250px"></div>
    </div>
    </div>`);
}

// === POZEMKY ===
function addPozemok(listId){
    const list=document.getElementById(listId);const idx=counters.pozemky++;const p=listId.includes('hist')?'hp':'p';
    list.insertAdjacentHTML('beforeend',`<div class="dynamic-item"><div class="dynamic-item-header"><h4>Pozemok Ä. ${idx+1}</h4><button type="button" class="btn-remove" onclick="this.closest('.dynamic-item').remove()">OdstrÃ¡niÅ¥</button></div>
    <div class="form-row"><div class="form-group"><label>LV Ä.</label><input type="text" name="${p}_lv_${idx}" placeholder="1477"></div><div class="form-group"><label>Obec</label><input type="text" name="${p}_obec_${idx}" placeholder="Nitra"></div></div>
    <div class="form-row"><div class="form-group"><label>KatastrÃ¡lne Ãºzemie</label><input type="text" name="${p}_ku_${idx}" placeholder="Nitra"></div><div class="form-group"><label>Parcela Ä.</label><input type="text" name="${p}_parcela_${idx}" placeholder="174/8" style="display:inline-block;width:60%"><select name="${p}_register_${idx}" style="display:inline-block;width:38%;margin-left:2%"><option value="C">register C</option><option value="E">register E</option></select></div></div>
    <div class="form-row three"><div class="form-group"><label>VÃ½mera (mÂ²)</label><input type="number" name="${p}_vymera_${idx}" placeholder="1000"></div><div class="form-group"><label>Druh pozemku</label><select name="${p}_druh_${idx}"><option value="">â€” vyberte â€”</option><option>ornÃ¡ pÃ´da</option><option>chmeÄ¾nica</option><option>vinica</option><option>zÃ¡hrada</option><option>ovocnÃ½ sad</option><option>trvalÃ½ trÃ¡vny porast</option><option>lesnÃ½ pozemok</option><option>vodnÃ¡ plocha</option><option>zastavanÃ¡ plocha a nÃ¡dvorie</option><option>ostatnÃ¡ plocha</option><option>ostatnÃ¡ poÄ¾nohospodÃ¡rska plocha</option></select></div><div class="form-group"><label>Hodnota (â‚¬)</label><input type="number" name="${p}_hodnota_${idx}" placeholder="1000"></div></div>
    <div class="form-row full"><div class="form-group"><label>SpoluvlastnÃ­cky podiel</label><input type="text" name="${p}_podiel_${idx}" placeholder="1/1"></div></div></div>`);
}

// === STAVBY ===
function addStavba(listId){
    const list=document.getElementById(listId||'stavbyList');const idx=counters.stavby++;const p=listId&&listId.includes('hist')?'hs':'s';
    list.insertAdjacentHTML('beforeend',`<div class="dynamic-item"><div class="dynamic-item-header"><h4>Stavba Ä. ${idx+1}</h4><button type="button" class="btn-remove" onclick="this.closest('.dynamic-item').remove()">OdstrÃ¡niÅ¥</button></div>
    <div class="form-row"><div class="form-group"><label>LV Ä.</label><input type="text" name="${p}_lv_${idx}" placeholder="1744"></div><div class="form-group"><label>Obec</label><input type="text" name="${p}_obec_${idx}" placeholder="Nitra"></div></div>
    <div class="form-row"><div class="form-group"><label>KatastrÃ¡lne Ãºzemie</label><input type="text" name="${p}_ku_${idx}" placeholder="Nitra"></div><div class="form-group"><label>Na pozemku parcelnÃ© Ä.</label><input type="text" name="${p}_parcela_${idx}" placeholder="174/8" style="display:inline-block;width:60%"><select name="${p}_register_${idx}" style="display:inline-block;width:38%;margin-left:2%"><option value="C">register C</option><option value="E">register E</option></select></div></div>
    <div class="form-row three"><div class="form-group"><label>SÃºpisnÃ© Ä.</label><input type="text" name="${p}_supisne_${idx}" placeholder="44"></div><div class="form-group"><label>OrientaÄnÃ© Ä.</label><input type="text" name="${p}_orient_${idx}" placeholder="12"></div><div class="form-group"><label>Popis stavby</label><input type="text" name="${p}_popis_${idx}" placeholder="rodinnÃ½ dom"></div></div>
    <div class="form-row"><div class="form-group"><label>Hodnota (â‚¬)</label><input type="number" name="${p}_hodnota_${idx}" placeholder="120000"></div><div class="form-group"><label>Spoluvl. podiel</label><input type="text" name="${p}_podiel_${idx}" placeholder="1/1"></div></div></div>`);
}

// === BYTY ===
function addByt(listId){
    const list=document.getElementById(listId||'bytyList');const idx=counters.byty++;const p=listId&&listId.includes('hist')?'hb':'b';
    list.insertAdjacentHTML('beforeend',`<div class="dynamic-item"><div class="dynamic-item-header"><h4>Byt Ä. ${idx+1}</h4><button type="button" class="btn-remove" onclick="this.closest('.dynamic-item').remove()">OdstrÃ¡niÅ¥</button></div>
    <div class="form-row"><div class="form-group"><label>LV Ä.</label><input type="text" name="${p}_lv_${idx}" placeholder="5544"></div><div class="form-group"><label>Obec</label><input type="text" name="${p}_obec_${idx}" placeholder="Nitra"></div></div>
    <div class="form-row"><div class="form-group"><label>KatastrÃ¡lne Ãºzemie</label><input type="text" name="${p}_ku_${idx}" placeholder="ChrenovÃ¡"></div><div class="form-group"><label>Na pozemku parcelnÃ© Ä.</label><input type="text" name="${p}_parcela_${idx}" placeholder="1234/5" style="display:inline-block;width:60%"><select name="${p}_register_${idx}" style="display:inline-block;width:38%;margin-left:2%"><option value="C">register C</option><option value="E">register E</option></select></div></div>
    <div class="form-row three"><div class="form-group"><label>Vchod</label><input type="text" name="${p}_vchod_${idx}" placeholder="A"></div><div class="form-group"><label>Poschodie</label><input type="text" name="${p}_poschodie_${idx}" placeholder="4"></div><div class="form-group"><label>ÄŒÃ­slo bytu</label><input type="text" name="${p}_cislo_${idx}" placeholder="66"></div></div>
    <div class="form-row"><div class="form-group"><label>SÃºpisnÃ© Ä.</label><input type="text" name="${p}_supisne_${idx}" placeholder="99"></div><div class="form-group"><label>OrientaÄnÃ© Ä.</label><input type="text" name="${p}_orient_${idx}" placeholder="15"></div></div>
    <div class="form-row"><div class="form-group"><label>Druh pozemku</label><select name="${p}_druh_${idx}"><option value="">â€” vyberte â€”</option><option>ornÃ¡ pÃ´da</option><option>chmeÄ¾nica</option><option>vinica</option><option>zÃ¡hrada</option><option>ovocnÃ½ sad</option><option>trvalÃ½ trÃ¡vny porast</option><option>lesnÃ½ pozemok</option><option>vodnÃ¡ plocha</option><option>zastavanÃ¡ plocha a nÃ¡dvorie</option><option>ostatnÃ¡ plocha</option><option>ostatnÃ¡ poÄ¾nohospodÃ¡rska plocha</option></select></div><div class="form-group"><label>Popis stavby</label><input type="text" name="${p}_popisStavby_${idx}" placeholder="bytovÃ½ dom"></div></div>
    <div class="form-row full"><div class="form-group"><label>Podiel na spoloÄnÃ½ch Äastiach</label><input type="text" name="${p}_podielSpoloc_${idx}" placeholder="6174/408572"></div></div>
    <div class="form-row full"><div class="form-group"><label>Popis bytu</label><input type="text" name="${p}_popisBytu_${idx}" placeholder="3-izbovÃ½ byt, 68 mÂ²"></div></div>
    <div class="form-row"><div class="form-group"><label>Hodnota (â‚¬)</label><input type="number" name="${p}_hodnota_${idx}" placeholder="100000"></div><div class="form-group"><label>Spoluvl. podiel</label><input type="text" name="${p}_podiel_${idx}" placeholder="1/1"></div></div></div>`);
}

// === HNUTEÄ½NÃ‰ VECI ===
function addHnutelna(listId){
    const list=document.getElementById(listId||'hnutelneList');const idx=counters.hnutelne++;const p=listId&&listId.includes('hist')?'hh':'h';
    list.insertAdjacentHTML('beforeend',`<div class="dynamic-item"><div class="dynamic-item-header"><h4>HnuteÄ¾nÃ¡ vec Ä. ${idx+1}</h4><button type="button" class="btn-remove" onclick="this.closest('.dynamic-item').remove()">OdstrÃ¡niÅ¥</button></div>
    <div class="form-row full"><div class="form-group"><label>Popis</label><input type="text" name="${p}_popis_${idx}" placeholder="Audi A4 Avant, rok vÃ½roby 2015"></div></div>
    <div class="form-row"><div class="form-group"><label>VIN / vÃ½robnÃ© Ä.</label><input type="text" name="${p}_vin_${idx}" placeholder="WAUZZZ8K6FA123456"></div><div class="form-group"><label>Å PZ / evidenÄnÃ© Ä.</label><input type="text" name="${p}_spz_${idx}" placeholder="NR232FL"></div></div>
    <div class="form-row"><div class="form-group"><label>Kde sa nachÃ¡dza</label><input type="text" name="${p}_kde_${idx}" placeholder="SvÃ¤tourbanskÃ¡ 26, 949 01 Nitra"></div><div class="form-group"><label>Hodnota (â‚¬)</label><input type="number" name="${p}_hodnota_${idx}" placeholder="12000"></div></div></div>`);
}

// === ÃšÄŒTY ===
function addUcet(){
    const list=document.getElementById('uctyList');const idx=counters.ucty++;
    list.insertAdjacentHTML('beforeend',`<div class="dynamic-item"><div class="dynamic-item-header"><h4>ÃšÄet Ä. ${idx+1}</h4><button type="button" class="btn-remove" onclick="this.closest('.dynamic-item').remove()">OdstrÃ¡niÅ¥</button></div>
    <div class="form-row"><div class="form-group"><label>IBAN</label><input type="text" name="ucet_iban_${idx}" placeholder="SK44 1100 0000 0012 3456 7890"></div><div class="form-group"><label>Banka</label><input type="text" name="ucet_banka_${idx}" placeholder="Tatra banka, a.s."></div></div>
    <div class="form-row full"><div class="form-group"><label>Zostatok (â‚¬)</label><input type="number" name="ucet_zostatok_${idx}" placeholder="555"></div></div></div>`);
}

// === VERITELIA ===
function addVeritel(){
    const list=document.getElementById('veriteliaList');const idx=counters.veritelia++;
    list.insertAdjacentHTML('beforeend',`<div class="dynamic-item"><div class="dynamic-item-header"><h4>VeriteÄ¾ Ä. ${idx+1}</h4><button type="button" class="btn-remove" onclick="this.closest('.dynamic-item').remove()">OdstrÃ¡niÅ¥</button></div>
    <div class="form-row"><div class="form-group"><label>NÃ¡zov / Meno</label><input type="text" name="ver_nazov_${idx}" placeholder="Tatra banka, a.s."></div><div class="form-group"><label>IÄŒO / DÃ¡tum nar.</label><input type="text" name="ver_ico_${idx}" placeholder="00686930"></div></div>
    <div class="form-row"><div class="form-group"><label>Ulica (sÃ­dlo)</label><input type="text" name="ver_ulica_${idx}" placeholder="HodÅ¾ovo nÃ¡mestie 3"></div><div class="form-group"><label>SÃºpisnÃ© ÄÃ­slo</label><input type="text" name="ver_supisne_${idx}" placeholder="3"></div></div>
    <div class="form-row three"><div class="form-group"><label>Obec</label><input type="text" name="ver_obec_${idx}" placeholder="Bratislava"></div><div class="form-group"><label>PSÄŒ</label><input type="text" name="ver_psc_${idx}" placeholder="81106"></div><div class="form-group"><label>Å tÃ¡t</label><input type="text" name="ver_stat_${idx}" value="SR"></div></div></div>`);
}

// === SAVE / LOAD ===
function saveProgress(){
    try{
        const form=document.getElementById('bankruptcyForm');
        const data=new FormData(form);const obj={};
        data.forEach((v,k)=>{ if(obj[k]){if(!Array.isArray(obj[k]))obj[k]=[obj[k]];obj[k].push(v);} else obj[k]=v; });
        obj._step=currentStep; obj._counters=counters;
        obj._dynamicHTML={};
        ['domacnostList','pozemkyList','stavbyList','bytyList','hnutelneList','uctyList','veriteliaList','histPozemkyList','histStavbyList','histBytyList','histHnutelneList'].forEach(id=>{
            const el=document.getElementById(id);if(el)obj._dynamicHTML[id]=el.innerHTML;
        });
        localStorage.setItem('oddlzenie_form',JSON.stringify(obj));
        const btn=document.querySelector('.btn-save');if(btn){btn.textContent='âœ“ UloÅ¾enÃ©';setTimeout(()=>btn.textContent='UloÅ¾iÅ¥ rozpracovanÃ©',2000);}
    }catch(e){console.error('Save error:',e);}
}

function loadProgress(){
    try{
        const saved=localStorage.getItem('oddlzenie_form');
        if(!saved)return;
        const obj=JSON.parse(saved);
        if(obj._counters)Object.assign(counters,obj._counters);
        if(obj._dynamicHTML){Object.keys(obj._dynamicHTML).forEach(id=>{const el=document.getElementById(id);if(el)el.innerHTML=obj._dynamicHTML[id];});}
        const form=document.getElementById('bankruptcyForm');
        Object.keys(obj).forEach(k=>{
            if(k.startsWith('_'))return;
            const el=form.querySelector('[name="'+k+'"]');
            if(!el)return;
            if(el.type==='checkbox')el.checked=!!obj[k];
            else el.value=obj[k];
        });
        if(obj._step){currentStep=obj._step;updateUI();}
    }catch(e){console.error('Load error:',e);}
}

// === SUMMARY ===
function buildSummary(){
    const g=id=>{const el=document.getElementById(id);return el?el.value||'â€”':'â€”';};
    const gc=name=>{const el=document.querySelector('[name="'+name+'"]');return el&&el.checked?'Ãno':'Nie';};
    let html='';
    // OsobnÃ© Ãºdaje
    html+=`<div class="summary-section"><h3>OsobnÃ© Ãºdaje <button class="edit-btn" onclick="goToStep(1)">UpraviÅ¥</button></h3>
    <div class="summary-row"><span class="summary-label">Meno</span><span class="summary-value">${g('titul')?g('titul')+' ':''}${g('meno')} ${g('priezvisko')}</span></div>
    <div class="summary-row"><span class="summary-label">RodnÃ© ÄÃ­slo</span><span class="summary-value">${g('rodneCislo')}</span></div>
    <div class="summary-row"><span class="summary-label">DÃ¡tum narodenia</span><span class="summary-value">${g('datumNarodenia')}</span></div>
    <div class="summary-row"><span class="summary-label">Adresa</span><span class="summary-value">${g('ulica')} ${g('cisloDomu')}, ${g('psc')} ${g('obec')}</span></div>
    <div class="summary-row"><span class="summary-label">TelefÃ³n</span><span class="summary-value">${g('telefon')}</span></div>
    <div class="summary-row"><span class="summary-label">E-mail</span><span class="summary-value">${g('email')}</span></div></div>`;
    // Vzdelanie
    html+=`<div class="summary-section"><h3>Vzdelanie a prÃ¡ca <button class="edit-btn" onclick="goToStep(2)">UpraviÅ¥</button></h3>
    <div class="summary-row"><span class="summary-label">Vzdelanie</span><span class="summary-value">${g('vzdelanie')}</span></div>
    <div class="summary-row"><span class="summary-label">Odbor / Å kola</span><span class="summary-value">${g('vzdelanieOdbor')} / ${g('vzdelanieSkaola')}</span></div></div>`;
    // SituÃ¡cia
    html+=`<div class="summary-section"><h3>Å½ivotnÃ¡ situÃ¡cia <button class="edit-btn" onclick="goToStep(3)">UpraviÅ¥</button></h3>
    <div class="summary-row"><span class="summary-label">Osoby v domÃ¡cnosti</span><span class="summary-value">${document.querySelectorAll('#domacnostList .dynamic-item').length}</span></div>
    <div class="summary-row"><span class="summary-label">Vznik dlhov</span><span class="summary-value" style="max-width:70%;font-size:.82rem">${g('vznikDlhov').substring(0,150)}...</span></div></div>`;
    // Majetok
    const pocetMaj=document.querySelectorAll('#pozemkyList .dynamic-item,#stavbyList .dynamic-item,#bytyList .dynamic-item,#hnutelneList .dynamic-item,#uctyList .dynamic-item').length;
    html+=`<div class="summary-section"><h3>Majetok <button class="edit-btn" onclick="goToStep(4)">UpraviÅ¥</button></h3>
    <div class="summary-row"><span class="summary-label">PoÄet poloÅ¾iek majetku</span><span class="summary-value">${pocetMaj}</span></div>
    <div class="summary-row"><span class="summary-label">Obydlie</span><span class="summary-value">${document.querySelector('[name="obydlieTyp"][value="uplatnujem"]')?.checked ? (document.getElementById('obydlieVyber').selectedOptions[0]?.text||'â€”') : 'NevlastnÃ­m obÃ½vateÄ¾nÃº vec'}</span></div></div>`;
    // Veritelia
    const pocetVer=document.querySelectorAll('#veriteliaList .dynamic-item').length;
    html+=`<div class="summary-section"><h3>Veritelia <button class="edit-btn" onclick="goToStep(6)">UpraviÅ¥</button></h3>
    <div class="summary-row"><span class="summary-label">PoÄet veriteÄ¾ov</span><span class="summary-value">${pocetVer}</span></div></div>`;
    document.getElementById('summaryContent').innerHTML=html;
}

// === SUBMIT ===
async function submitForm(){
    if(!validateStep(7))return;
    const overlay=document.getElementById('loadingOverlay');overlay.classList.add('active');
    try{
        const form=document.getElementById('bankruptcyForm');
        const data=new FormData(form);const obj={};
        data.forEach((v,k)=>{ if(obj[k]){if(!Array.isArray(obj[k]))obj[k]=[obj[k]];obj[k].push(v);} else obj[k]=v; });
        const resp=await fetch(API_URL+'/api/submit-form',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(obj)});
        if(!resp.ok)throw new Error('Server error');
        overlay.classList.remove('active');
        localStorage.removeItem('oddlzenie_form');
        showSuccess();
    }catch(err){
        overlay.classList.remove('active');
        alert('Chyba pri odosielanÃ­. SkÃºste znova alebo nÃ¡s kontaktujte na info@oddlzenieonline.sk');
        console.error(err);
    }
}

function showSuccess(){
    document.getElementById('progressContainer').style.display='none';
    document.getElementById('navButtons').style.display='none';
    document.querySelector('.main').innerHTML=`
    <div class="success-screen">
        <div class="success-icon">âœ…</div>
        <h2>Å½iadosÅ¥ ÃºspeÅ¡ne odoslanÃ¡!</h2>
        <p>Äakujeme za vyplnenie Å¾iadosti. VaÅ¡e dokumenty boli vygenerovanÃ© a odoslanÃ© na kontrolu.</p>
        <div class="success-steps">
            <div class="success-step"><div class="success-step-num">1</div><div class="success-step-text"><h4>Kontrola dokumentov</h4><p>PrÃ¡vnik skontroluje vaÅ¡e Ãºdaje do 24â€“48 hodÃ­n.</p></div></div>
            <div class="success-step"><div class="success-step-num">2</div><div class="success-step-text"><h4>Kontaktovanie</h4><p>Ozveme sa vÃ¡m s informÃ¡ciami o ÄalÅ¡om postupe.</p></div></div>
            <div class="success-step"><div class="success-step-num">3</div><div class="success-step-text"><h4>Ãšhrada a podanie</h4><p>Po kontrole a Ãºhrade 349 â‚¬ budÃº dokumenty pripravenÃ© na podanie.</p></div></div>
        </div>
    </div>`;
}

// === AUTOFILL ===
function autoFill(){
    // OsobnÃ© Ãºdaje
    const vals = {
        titul:'JUDr.', meno:'Miroslav', priezvisko:'Å upa', priezviskoPredch:'',
        rodneCislo:'771006/6815', datumNarodenia:'1977-10-06', statnaPreslusnost:'SlovenskÃ¡ republika',
        ulica:'SvÃ¤tourbanskÃ¡', cisloDomu:'26', obec:'Nitra', psc:'94901', kraj:'Nitriansky',
        telefon:'+421905321070', email:'miroslav.supa@gmail.com',
        // Vzdelanie
        vzdelanie:'VÅ  II. stupÅˆa', vzdelanieRok:'2001', vzdelanieOdbor:'PrÃ¡vo', vzdelanieSkaola:'UMB BB',
        dalsieVzdelanie:'rok Harvard', jazyky:'AJ A1, NJ B1', vodicak:'Ãno', vodicakTyp:'B',
        zdravotnyStav:'sve super',
        // PrÃ¡ca
        praca_od_0:'01/2001', praca_do_0:'12/2001', praca_pozicia_0:'SZÄŒO', praca_zamestnavatel_0:'ExU NR',
        // SociÃ¡lne
        ico:'37857207', rodinnyStav:'Å½enatÃ½/VydatÃ¡', bsm:'Nie',
        // PrÃ­jmy
        prijem_suma_0:'3000', prijem_zdroj_0:'mzda',
        // VÃ½davky
        vydaj_byvanie:'100', vydaj_strava:'100', vydaj_hygiena:'10', vydaj_zdravie:'10',
        vydaj_deti:'100', vydaj_poistne:'10', vydaj_cestovne:'10', vydaj_dlhy:'500',
        // Dlhy
        vznikDlhov:'Dlhy vznikli v dÃ´sledku neÃºspeÅ¡nÃ©ho podnikania v roku 2018, kedy som musel zatvoriÅ¥ prevÃ¡dzku a zostali mi nesplatenÃ© zÃ¡vÃ¤zky voÄi dodÃ¡vateÄ¾om a banke.',
        // Rodina - domÃ¡cnosÅ¥
        deti:'',
        ineOsoby:'',
        // BlÃ­zke osoby
        blizka_meno_0:'KatarÃ­na Å upovÃ¡', blizka_vztah_0:'sestra', blizka_adresa_0:'KmeÅ¥kova 30, Nitra',
        // ÃšÄasti
        mojeUcasti:'NovÃ¡ nitrianska spoloÄnosÅ¥, s.r.o., IÄŒO: 36542997, Nitra',
        blizkeUcasti:'Petra Å upovÃ¡ (manÅ¾elka) â€“ ABC Trading s.r.o., IÄŒO: 12345678, Bratislava',
        // Majetok - inÃ©
        ineMajetkoveHodnoty:'zlato 1 unca a striebro 100 uncÃ­',
        zabezpPrava:'(Å¾iadne)', sudneSpory:'nemÃ¡m',
        obydlieBSM:'Nie',
        // HistÃ³ria
        histIne:'(Å¾iadne)', histZabezp:'(Å¾iadne)', histSpory:'(Å¾iadne)',
    };
    // VyplÅˆ jednoduchÃ© polia
    Object.keys(vals).forEach(k=>{
        const el=document.querySelector('[name="'+k+'"]');
        if(el){el.value=vals[k];el.dispatchEvent(new Event('change'));}
    });
    // Checkboxy
    const cb=document.querySelector('[name="soc_szco"]');if(cb){cb.checked=true;document.getElementById('soc_szco_ico').style.display='block';}
    const obRadio=document.querySelector('[name="obydlieTyp"][value="uplatnujem"]');if(obRadio){obRadio.checked=true;document.getElementById('obydlieDetailUplatnujem').style.display='block';}
    // Build obydlie select after all property is added (delay to wait for DOM)
    setTimeout(()=>{buildObydlieSelect();const sel=document.getElementById('obydlieVyber');if(sel&&sel.options.length>1)sel.selectedIndex=2;},300);

    // DomÃ¡cnosÅ¥ - manÅ¾elka
    addOsobaDomacnost();
    setTimeout(()=>{
        const f={dom_meno_0:'Petra Å upovÃ¡',dom_datnar_0:'26.06.1978',dom_vztah_0:'manÅ¾el/ka'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
        const cb=document.querySelector('[name="dom_soc_zamestanany_0"]');if(cb)cb.checked=true;
    },100);
    // DomÃ¡cnosÅ¥ - dcÃ©ra
    addOsobaDomacnost();
    setTimeout(()=>{
        const f={dom_meno_1:'Alexandra Å upovÃ¡',dom_datnar_1:'05.02.2013',dom_vztah_1:'dcÃ©ra'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
        const cbi=document.querySelector('[name="dom_soc_ine_1"]');if(cbi){cbi.checked=true;cbi.dispatchEvent(new Event('change'));}
        setTimeout(()=>{const el=document.querySelector('[name="dom_ine_1"]');if(el)el.value='Å¡tudentka';},50);
    },150);
    // DomÃ¡cnosÅ¥ - syn
    addOsobaDomacnost();
    setTimeout(()=>{
        const f={dom_meno_2:'Miroslav Å upa ml.',dom_datnar_2:'27.01.2010',dom_vztah_2:'syn'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
        const cbi=document.querySelector('[name="dom_soc_ine_2"]');if(cbi){cbi.checked=true;cbi.dispatchEvent(new Event('change'));}
        setTimeout(()=>{const el=document.querySelector('[name="dom_ine_2"]');if(el)el.value='Å¡tudent';},50);
    },200);

    // Pridaj prÃ¡cu Ä.2
    addDynamic('pracovneList','praca','Zamestnanie');
    setTimeout(()=>{
        const f={praca_od_1:'12/2001',praca_do_1:'doteraz',praca_pozicia_1:'exekÃºtor',praca_zamestnavatel_1:'SZÄŒO'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
    },100);

    // Pridaj blÃ­zku osobu Ä.2
    addDynamic('blizkeOsobyList','blizka','BlÃ­zka osoba');
    setTimeout(()=>{
        const f={blizka_meno_1:'Edita Å upovÃ¡',blizka_vztah_1:'matka',blizka_adresa_1:'SvÃ¤tourbanskÃ¡ 26, Nitra'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
    },100);

    // Majetok - pozemok
    addPozemok('pozemkyList');
    setTimeout(()=>{
        const f={p_lv_0:'1477',p_obec_0:'Nitra',p_ku_0:'Nitra',p_parcela_0:'174/8',p_register_0:'C',p_vymera_0:'1000',p_druh_0:'ornÃ¡ pÃ´da',p_hodnota_0:'1000',p_podiel_0:'1/1'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
    },100);

    // Stavba
    addStavba('stavbyList');
    setTimeout(()=>{
        const f={s_lv_0:'1744',s_obec_0:'Nitra',s_ku_0:'Nitra',s_supisne_0:'44',s_orient_0:'12',s_parcela_0:'174/8',s_register_0:'C',s_popis_0:'rodinnÃ½ dom',s_hodnota_0:'120000',s_podiel_0:'1/1'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
    },100);

    // Byt
    addByt('bytyList');
    setTimeout(()=>{
        const f={b_lv_0:'5544',b_obec_0:'Nitra',b_ku_0:'ChrenovÃ¡',b_parcela_0:'1234/5',b_register_0:'C',b_vchod_0:'A',b_poschodie_0:'4',b_cislo_0:'66',b_supisne_0:'99',b_orient_0:'15',b_druh_0:'zastavanÃ¡ plocha a nÃ¡dvorie',b_popisStavby_0:'bytovÃ½ dom',b_podielSpoloc_0:'6174/408572',b_popisBytu_0:'3-izbovÃ½ byt o vÃ½mere 68 mÂ², WC, chodba, kuchyÅˆa, kÃºpeÄ¾Åˆa',b_hodnota_0:'100000',b_podiel_0:'1/1'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
    },100);

    // HnuteÄ¾nÃ¡ vec
    addHnutelna('hnutelneList');
    setTimeout(()=>{
        const f={h_popis_0:'Audi A4 Avant, rok vÃ½roby 2015',h_vin_0:'WAUZZZ8K6FA123456',h_spz_0:'NR232FL',h_kde_0:'SvÃ¤tourbanskÃ¡ 26, 949 01 Nitra',h_hodnota_0:'12000'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
    },100);

    // ÃšÄet
    addUcet();
    setTimeout(()=>{
        const f={ucet_iban_0:'SK44 1100 0000 0012 3456 7890',ucet_banka_0:'Tatra banka, a.s.',ucet_zostatok_0:'555'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
    },100);

    // HistÃ³ria - pozemok
    addPozemok('histPozemkyList');
    setTimeout(()=>{
        const f={hp_lv_0:'1666',hp_obec_0:'Babindol',hp_ku_0:'Babindol',hp_parcela_0:'789/9',hp_register_0:'E',hp_vymera_0:'2500',hp_druh_0:'trvalÃ½ trÃ¡vny porast',hp_hodnota_0:'25000',hp_podiel_0:'1/2'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
    },100);

    // HistÃ³ria - stavba
    addStavba('histStavbyList');
    setTimeout(()=>{
        const f={hs_lv_0:'5555',hs_obec_0:'Nitra',hs_ku_0:'Nitra',hs_supisne_0:'123',hs_orient_0:'45',hs_parcela_0:'456/7',hs_register_0:'C',hs_popis_0:'administratÃ­vna budova',hs_hodnota_0:'500000',hs_podiel_0:'1/1'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
    },100);

    // HistÃ³ria - byt
    addByt('histBytyList');
    setTimeout(()=>{
        const f={hb_lv_0:'2222',hb_obec_0:'Nitra',hb_ku_0:'ChrenovÃ¡',hb_parcela_0:'987/1',hb_register_0:'C',hb_vchod_0:'B',hb_poschodie_0:'8',hb_cislo_0:'32',hb_supisne_0:'77',hb_orient_0:'7',hb_druh_0:'zastavanÃ¡ plocha a nÃ¡dvorie',hb_popisStavby_0:'panelovÃ½ bytovÃ½ dom',hb_podielSpoloc_0:'5500/350000',hb_popisBytu_0:'2-izbovÃ½ byt o vÃ½mere 55 mÂ², WC, chodba, kuchyÅˆa, kÃºpeÄ¾Åˆa, balkÃ³n, pivnica, komora',hb_hodnota_0:'85000',hb_podiel_0:'1/1'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
    },100);

    // Veritelia
    addVeritel();
    setTimeout(()=>{
        const f={ver_nazov_0:'Tatra banka, a.s.',ver_ico_0:'00686930',ver_ulica_0:'HodÅ¾ovo nÃ¡mestie 3',ver_supisne_0:'3',ver_obec_0:'Bratislava',ver_psc_0:'81106',ver_stat_0:'SR'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
    },100);
    addVeritel();
    setTimeout(()=>{
        const f={ver_nazov_1:'VÃšB, a.s.',ver_ico_1:'31320155',ver_ulica_1:'MlynskÃ© nivy 1',ver_supisne_1:'1',ver_obec_1:'Bratislava',ver_psc_1:'82990',ver_stat_1:'SR'};
        Object.keys(f).forEach(k=>{const el=document.querySelector('[name="'+k+'"]');if(el)el.value=f[k];});
    },200);

    alert('âœ… FormulÃ¡r vyplnenÃ½! Prejdite vÅ¡etky kroky a na konci odoÅ¡lite.');
}

// === INIT ===
document.addEventListener('DOMContentLoaded',()=>{loadProgress();});
</script>
</body></html>
 
